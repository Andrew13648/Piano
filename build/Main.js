!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){176===t[0]&&64==t[1]?t[2]>0?_.pedalDown():_.pedalUp():128===t[0]?_.keyUp(t[1]):144===t[0]&&_.keyDown(t[1],t[2]/127)}var o=i(21),s=n(o),a=i(8),u=(n(a),i(7)),p=n(u),h=i(23),l=n(h),c=i(27),f=n(c),d=i(6),m=n(d),_=(new s["default"]).toMaster();_.load("./Salamander/Salamander.mp3").then(function(){var t=document.querySelector("button");t.classList="active"}),p["default"].on("progress",function(t){document.querySelector("#loading #fill").style.width=(100*t).toString()+"%"}),p["default"].on("load",function(t){document.querySelector("#loading").remove()}),l["default"].load("clair_de_lune.mid",function(t){m["default"].set(t.transport);new f["default"](function(t,e){e.value?_.pedalDown(t):_.pedalUp(t)},t.tracks[0].sustain).start(0),new f["default"](function(t,e){_.keyUp(e.midi,t)},t.tracks[0].noteOffs).start(0),new f["default"](function(t,e){_.keyDown(e.midi,e.velocity,t)},t.tracks[0].notes).start(0)}),window.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll("input"),e=!0,i=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;s.addEventListener("input",function(t){_.setVolume(t.target.name,t.target.value)})}}catch(a){i=!0,n=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(i)throw n}}var u=document.querySelector("button");u.addEventListener("click",function(t){"started"===m["default"].state?(m["default"].pause(),u.textContent="START"):(m["default"].start(),u.textContent="PAUSE")})}),navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then(function(t){t.inputs.forEach(function(t){t.addEventListener("midimessage",function(t){r(t.data)})})})},function(t,e,i){var n;n=function(){"use strict";function t(t){return void 0===t}function e(t){return"function"==typeof t}var i;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");i=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),t(AudioNode.prototype._nativeConnect)&&(AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,i,n){if(e.input)Array.isArray(e.input)?(t(n)&&(n=0),this.connect(e.input[n])):this.connect(e.input,i,n);else try{e instanceof AudioNode?this._nativeConnect(e,i,n):this._nativeConnect(e,i)}catch(r){throw new Error("error connecting to node: "+e)}});var n=function(e,i){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(i)||1===i?this.output=this.context.createGain():i>1&&(this.output=new Array(e))};n.prototype.set=function(e,i,r){if(this.isObject(e))r=i;else if(this.isString(e)){var o={};o[e]=i,e=o}for(var s in e){i=e[s];var a=this;if(s.indexOf(".")!==-1){for(var u=s.split("."),p=0;p<u.length-1;p++)a=a[u[p]];s=u[u.length-1]}var h=a[s];t(h)||(n.Signal&&h instanceof n.Signal||n.Param&&h instanceof n.Param?h.value!==i&&(t(r)?h.value=i:h.rampTo(i,r)):h instanceof AudioParam?h.value!==i&&(h.value=i):h instanceof n?h.set(i):h!==i&&(a[s]=i))}return this},n.prototype.get=function(i){t(i)?i=this._collectDefaults(this.constructor):this.isString(i)&&(i=[i]);for(var r={},o=0;o<i.length;o++){var s=i[o],a=this,u=r;if(s.indexOf(".")!==-1){for(var p=s.split("."),h=0;h<p.length-1;h++){var l=p[h];u[l]=u[l]||{},u=u[l],a=a[l]}s=p[p.length-1]}var c=a[s];this.isObject(i[s])?u[s]=c.get():n.Signal&&c instanceof n.Signal?u[s]=c.value:n.Param&&c instanceof n.Param?u[s]=c.value:c instanceof AudioParam?u[s]=c.value:c instanceof n?u[s]=c.get():e(c)||t(c)||(u[s]=c)}return r},n.prototype._collectDefaults=function(e){var i=[];if(t(e.defaults)||(i=Object.keys(e.defaults)),!t(e._super))for(var n=this._collectDefaults(e._super),r=0;r<n.length;r++)i.indexOf(n[r])===-1&&i.push(n[r]);return i},n.prototype.toString=function(){for(var t in n){var i=t[0].match(/^[A-Z]$/),r=n[t]===this.constructor;if(e(n[t])&&i&&r)return t}return"Tone"},n.context=i,n.prototype.context=n.context,n.prototype.bufferSize=2048,n.prototype.blockTime=128/n.context.sampleRate,n.prototype.sampleTime=1/n.context.sampleRate,n.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var r=null;n.prototype.noGC=function(){return this.output.connect(r),this},AudioNode.prototype.noGC=function(){return this.connect(r),this},n.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},n.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.isUndef(t)?this.output.disconnect():this.output.disconnect(t),this},n.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},n.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},n.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=n.prototype.chain,AudioNode.prototype.fan=n.prototype.fan,n.prototype.defaultArg=function(e,i){if(this.isObject(e)&&this.isObject(i)){var n={};for(var r in e)n[r]=this.defaultArg(i[r],e[r]);for(var o in i)n[o]=this.defaultArg(e[o],i[o]);return n}return t(e)?i:e},n.prototype.optionsObject=function(t,e,i){var n={};if(1===t.length&&this.isObject(t[0]))n=t[0];else for(var r=0;r<e.length;r++)n[e[r]]=t[r];return this.isUndef(i)?n:this.defaultArg(n,i)},n.prototype.isUndef=t,n.prototype.isFunction=e,n.prototype.isNumber=function(t){return"number"==typeof t},n.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},n.prototype.isBoolean=function(t){return"boolean"==typeof t},n.prototype.isArray=function(t){return Array.isArray(t)},n.prototype.isString=function(t){return"string"==typeof t},n.noOp=function(){},n.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},n.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},n.State={Started:"started",Stopped:"stopped",Paused:"paused"},n.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},n.prototype.dbToGain=function(t){return Math.pow(2,t/6)},n.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},n.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},n.prototype.now=function(){return this.context.currentTime},n.now=function(){return n.context.currentTime},n.extend=function(e,i){function r(){}t(i)&&(i=n),r.prototype=i.prototype,e.prototype=new r,e.prototype.constructor=e,e._super=i};var o=[];return n._initAudioContext=function(t){t(n.context),o.push(t)},n.setContext=function(t){n.prototype.context=t,n.context=t;for(var e=0;e<o.length;e++)o[e](t)},n._initAudioContext(function(t){n.prototype.blockTime=128/t.sampleRate,n.prototype.sampleTime=1/t.sampleRate,r=t.createGain(),r.gain.value=0,r.connect(t.destination)}),n.version="r8-dev",console.log("%c * Tone.js "+n.version+" * ","background: #000; color: #fff"),n}.call(e,i,e,t),/**
	 *  Tone.js
	 *  @author Yotam Mann
	 *  @license http://opensource.org/licenses/MIT MIT License
	 *  @copyright 2014-2016 Yotam Mann
	 */
!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,r;n=[i(1),i(16),i(15),i(33)],r=function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Time(e).eval():e instanceof t.TransportTime?e.toSeconds():e instanceof t.Time?e.eval():e instanceof t.Frequency?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Frequency(e).eval():e instanceof t.Frequency?e.eval():e instanceof t.Time?e.toFrequency():void 0},t.prototype.toTicks=function(e){return this.isNumber(e)||this.isString(e)||this.isUndef(e)?new t.TransportTime(e).eval():e instanceof t.Frequency?e.toTicks():e instanceof t.TransportTime?e.eval():e instanceof t.Time?e.toTicks():void 0},t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=t%3;return 1===e?[t-1,u["default"].prototype.intervalToFrequencyRatio(1)]:2===e?[t+1,u["default"].prototype.intervalToFrequencyRatio(-1)]:[t,1]}function o(t){var e={};for(var i in t)e[i]=t[i];return e}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(u){r=!0,o=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=i(1),u=n(a),p=i(7),h=n(p),l=i(31),c=n(l),f={pedals:{down:{duration:6.37530612244898,start:2114.796961451247},up:{duration:.6948072562358276,start:2121.172267573696}},notes:{60:[{duration:12.04514739229025,start:855.9087528344671},{duration:15.72734693877551,start:899.1847845804989},{duration:16.18562358276644,start:914.9121315192743},{duration:15.716689342403628,start:867.9539002267574},{duration:15.514195011337868,start:883.670589569161}],63:[{duration:13.350702947845805,start:1371.2647619047618},{duration:15.141179138321995,start:1414.9990702947846},{duration:15.817936507936508,start:1430.1402494331066},{duration:15.556825396825397,start:1384.6154648526076},{duration:14.826780045351473,start:1400.1722902494332}],66:[{duration:12.396848072562358,start:1856.6803401360544},{duration:13.137551020408162,start:1898.5442403628117},{duration:14.688231292517006,start:1911.68179138322},{duration:14.970657596371883,start:1869.0771882086167},{duration:14.496394557823129,start:1884.0478458049886}],69:[{duration:13.201496598639455,start:388.5784807256236},{duration:13.62780045351474,start:430.4477097505669},{duration:13.32297052154195,start:444.07551020408164},{duration:13.739705215419502,start:401.77997732426303},{duration:14.928027210884354,start:415.51968253968255}],81:[{duration:6.961473922902495,start:457.3984807256236},{duration:6.865555555555556,start:485.3062811791383},{duration:10.537120181405896,start:492.1718367346939},{duration:10.377256235827664,start:464.35995464852607},{duration:10.56907029478458,start:474.7372108843537}],87:[{duration:6.908185941043084,start:1511.006485260771},{duration:6.570907029478458,start:1531.191700680272},{duration:6.699478458049887,start:1537.7626077097505},{duration:6.821791383219955,start:1517.9146712018141},{duration:6.455238095238095,start:1524.736462585034}],84:[{duration:5.213628117913832,start:1005.6419727891157},{duration:5.442766439909297,start:1023.2971428571428},{duration:6.22609977324263,start:1028.7399092970522},{duration:6.252743764172336,start:1010.8556009070295},{duration:6.188798185941043,start:1017.1083446712018}],24:[{duration:23.864421768707484,start:552.7069841269841},{duration:23.60331065759637,start:623.5648752834467},{duration:23.619297052154195,start:647.1681859410431},{duration:23.523378684807255,start:576.5714058956916},{duration:23.470090702947846,start:600.0947845804989}],27:[{duration:19.04718820861678,start:1073.103537414966},{duration:22.06328798185941,start:1140.4444217687076},{duration:24.274739229024945,start:1162.5077097505668},{duration:24.018956916099775,start:1092.1507256235827},{duration:24.274739229024945,start:1116.1696825396825}],21:[{duration:21.114761904761906,start:0},{duration:24.77031746031746,start:72.66904761904762},{duration:24.999455782312925,start:97.43936507936507},{duration:25.691655328798188,start:21.114761904761906},{duration:25.862630385487527,start:46.80641723356009}],48:[{duration:15.87122448979592,start:776.0943537414965},{duration:15.860566893424036,start:824.0490702947845},{duration:15.999115646258504,start:839.9096371882086},{duration:15.807278911564627,start:791.9655782312925},{duration:16.276213151927436,start:807.7728571428571}],45:[{duration:16.0897052154195,start:232.49866213151927},{duration:16.19628117913832,start:281.03954648526076},{duration:15.935170068027212,start:297.2358276643991},{duration:16.16963718820862,start:248.58836734693878},{duration:16.28154195011338,start:264.7580045351474}],42:[{duration:17.347301587301587,start:1679.3013151927437},{duration:19.51079365079365,start:1737.6685034013606},{duration:20.448662131519274,start:1757.1792970521542},{duration:20.374058956916098,start:1696.6486167800454},{duration:20.645827664399093,start:1717.0226757369614}],105:[{duration:2.6238321995464853,start:534.8771655328799},{duration:3.8547845804988663,start:544.8268934240363},{duration:4.0253061224489795,start:548.6816780045351},{duration:3.7695238095238097,start:537.5009977324263},{duration:3.5563718820861676,start:541.2705215419501}],75:[{duration:12.471451247165533,start:1445.958185941043},{duration:12.972358276643991,start:1485.0884126984126},{duration:12.945714285714285,start:1498.0607709750566},{duration:13.37734693877551,start:1458.4296371882085},{duration:13.281428571428572,start:1471.8069841269842}],78:[{duration:11.171224489795918,start:1926.370022675737},{duration:11.634829931972789,start:1961.290498866213},{duration:11.911927437641724,start:1972.925328798186},{duration:11.752063492063492,start:1937.541247165533},{duration:11.99718820861678,start:1949.2933106575963}],99:[{duration:5.053764172335601,start:1544.4620861678004},{duration:4.829954648526077,start:1559.6660090702949},{duration:4.872585034013605,start:1564.4959637188208},{duration:5.027120181405896,start:1549.515850340136},{duration:5.1230385487528345,start:1554.542970521542}],108:[{duration:3.098095238095238,start:1056.0783673469389},{duration:2.8103401360544216,start:1066.411768707483},{duration:3.8814285714285712,start:1069.2221088435374},{duration:3.5936734693877552,start:1059.176462585034},{duration:3.6416326530612246,start:1062.7701360544218}],72:[{duration:13.403990929705216,start:931.0977551020408},{duration:15.333015873015873,start:974.7414739229025},{duration:15.56748299319728,start:990.0744897959183},{duration:15.514195011337868,start:944.501746031746},{duration:14.725532879818594,start:960.0159410430839}],102:[{duration:4.835283446712018,start:2012.6212698412699},{duration:4.755351473922903,start:2026.75410430839},{duration:4.829954648526077,start:2031.509455782313},{duration:4.79265306122449,start:2017.456553287982},{duration:4.5048979591836735,start:2022.2492063492064}],90:[{duration:4.297074829931973,start:1984.8372562358277},{duration:5.533356009070295,start:2001.2401587301588},{duration:5.847755102040816,start:2006.773514739229},{duration:6.124852607709751,start:1989.1343310657596},{duration:5.980975056689342,start:1995.2591836734694}],93:[{duration:5.453424036281179,start:502.7089569160998},{duration:6.343219954648526,start:521.7270068027211},{duration:6.806938775510204,start:528.0702267573696},{duration:6.731043083900227,start:508.16238095238094},{duration:6.83358276643991,start:514.8934240362812}],96:[{duration:4.137210884353742,start:1034.9660090702948},{duration:4.051950113378685,start:1047.9478231292517},{duration:4.07859410430839,start:1051.9997732426305},{duration:4.483582766439909,start:1039.1032199546485},{duration:4.361020408163266,start:1043.5868027210884}],39:[{duration:18.913968253968253,start:1186.782448979592},{duration:22.233809523809523,start:1249.8549659863945},{duration:22.105918367346938,start:1272.0887755102042},{duration:21.940725623582768,start:1205.6964172335602},{duration:22.217823129251702,start:1227.6371428571429}],33:[{duration:20.192879818594104,start:122.43882086167801},{duration:19.765759637188207,start:189.42800453514738},{duration:23.304897959183673,start:209.1937641723356},{duration:23.39015873015873,start:142.6317006802721},{duration:23.406145124716552,start:166.02185941043084}],54:[{duration:15.498208616780046,start:1777.6279591836735},{duration:16.07371882086168,start:1824.4796145124717},{duration:16.127006802721088,start:1840.5533333333333},{duration:15.940498866213153,start:1793.1261678004535},{duration:15.412947845804988,start:1809.0666666666666}],57:[{duration:13.01498866213152,start:313.1709977324263},{duration:15.578140589569161,start:357.38489795918366},{duration:15.615442176870749,start:372.9630385487528},{duration:15.311700680272109,start:326.1859863945578},{duration:15.887210884353742,start:341.4976870748299}],30:[{duration:16.713174603174604,start:1569.3685487528344},{duration:23.251609977324264,start:1632.7021768707482},{duration:23.3475283446712,start:1655.9537868480725},{duration:23.3475283446712,start:1586.081723356009},{duration:23.272925170068028,start:1609.4292517006802}],51:[{duration:13.116235827664399,start:1294.1946938775511},{duration:15.924512471655328,start:1339.261201814059},{duration:16.079047619047618,start:1355.1857142857143},{duration:15.844580498866213,start:1307.3109297052154},{duration:16.105691609977324,start:1323.1555102040816}],36:[{duration:18.668843537414965,start:670.7874829931973},{duration:19.7181179138322,start:734.0571655328798},{duration:22.31907029478458,start:753.775283446712},{duration:22.281768707482993,start:689.4563265306123},{duration:22.31907029478458,start:711.7380952380952}]},hammers:{60:{duration:.45501133786848075,start:2107.1161904761907},63:{duration:.45501133786848075,start:2107.571201814059},66:{duration:.45501133786848075,start:2108.0262131519275},69:{duration:.45501133786848075,start:2108.4812244897957},81:{duration:.45501133786848075,start:2110.30126984127},87:{duration:.45501133786848075,start:2111.2112925170068},84:{duration:.45501133786848075,start:2110.756281179138},24:{duration:.45501133786848075,start:2101.6560544217687},27:{duration:.45501133786848075,start:2102.1110657596373},21:{duration:.45501133786848075,start:2101.2010430839},48:{duration:.45501133786848075,start:2105.2961451247165},108:{duration:.45501133786848075,start:2114.3419501133785},45:{duration:.45501133786848075,start:2104.841133786848},42:{duration:.45501133786848075,start:2104.3861224489797},105:{duration:.45501133786848075,start:2113.8869387755103},96:{duration:.40058956916099775,start:2112.5763265306123},99:{duration:.45501133786848075,start:2112.9769160997735},75:{duration:.45501133786848075,start:2109.391247165533},72:{duration:.45501133786848075,start:2108.9362358276644},102:{duration:.45501133786848075,start:2113.4319274376417},90:{duration:.45501133786848075,start:2111.6663038548754},93:{duration:.45501133786848075,start:2112.1213151927436},78:{duration:.45501133786848075,start:2109.8462585034013},39:{duration:.45501133786848075,start:2103.931111111111},33:{duration:.45501133786848075,start:2103.021088435374},54:{duration:.45501133786848075,start:2106.2061678004534},57:{duration:.45501133786848075,start:2106.661179138322},30:{duration:.45501133786848075,start:2102.5660770975055},51:{duration:.45501133786848075,start:2105.751156462585},36:{duration:.45501133786848075,start:2103.476099773243}},harmonics:{60:{duration:2.836984126984127,start:2061.7337188208617},63:{duration:2.831655328798186,start:2078.622403628118},66:{duration:2.7730385487528344,start:2095.5697052154196},69:{duration:2.842312925170068,start:2047.5967573696146},81:{duration:2.874285714285714,start:2050.4390702947844},87:{duration:2.7783673469387753,start:2084.301700680272},84:{duration:2.7730385487528344,start:2067.3490702947847},24:{duration:2.815668934240363,start:2053.3133560090705},27:{duration:2.815668934240363,start:2070.1221088435373},21:{duration:2.7783673469387753,start:2036.339410430839},48:{duration:2.7890249433106575,start:2058.944693877551},45:{duration:2.85297052154195,start:2041.9814058956915},42:{duration:2.868956916099773,start:2089.911723356009},75:{duration:2.847641723356009,start:2081.454058956916},72:{duration:2.7783673469387753,start:2064.570702947846},78:{duration:2.858299319727891,start:2098.342743764172},39:{duration:2.8636281179138323,start:2072.9377777777777},33:{duration:2.8636281179138323,start:2039.1177777777777},54:{duration:2.7890249433106575,start:2092.780680272109},57:{duration:2.762380952380952,start:2044.8343764172337},30:{duration:2.831655328798186,start:2087.080068027211},51:{duration:2.820997732426304,start:2075.8014058956915},36:{duration:2.815668934240363,start:2056.1290249433105}}};e["default"]={velocityCount:f.notes[21].length,buffer:null,newSource:function(){return new c["default"](this.buffer)},load:function(t){var e=this;return new Promise(function(i){e.buffer=new h["default"](t,i)})},getNote:function(t,e){var i=r(t),n=s(i,2),a=n[0],u=n[1],p=o(f.notes[a][e]);return p.duration/=u,{timing:p,rate:u}},getPedal:function(t){return o(f.pedals[t])},hasHarmonics:function(t){var e=r(t),i=s(e,2),n=i[0];i[1];return f.harmonics.hasOwnProperty(n)},getHarmonics:function(t){var e=r(t),i=s(e,2),n=i[0],a=i[1],u=o(f.harmonics[n]);return u.duration/=a,{timing:u,rate:a}},getRelease:function(t){var e=r(t),i=s(e,2),n=i[0],a=i[1],u=o(f.hammers[n]);return u.duration/=a,{timing:u,rate:a}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),p=n(u),h=i(8),l=(n(h),function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];r(this,e);var i=o(this,Object.getPrototypeOf(e).call(this,0,1));return i.volume=t,i}return s(e,t),a(e,[{key:"volume",get:function(){return this.gainToDb(this.output.gain.value)},set:function(t){this.output.gain.value=this.dbToGain(t)}}]),e}(p["default"]));e["default"]=l},function(t,e,i){var n,r;n=[i(1),i(14),i(2)],r=function(t){"use strict";return t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(24),i(2),i(9),i(13),i(5),i(25)],r=function(t){"use strict";t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var i=this._clock.ticks;if(this._swingAmount>0&&i%this._ppq!==0&&i%(2*this._swingTicks)!==0){var n=i%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i").eval()*r}this.loop&&i===this._loopEnd&&(this.ticks=this._loopStart,i=this._loopStart,this.trigger("loop",e)),this._onceEvents.forEachBefore(i,function(t){t.callback(e)}),this._onceEvents.cancelBefore(i),this._timeline.forEachAtTime(i,function(t){t.callback(e)}),this._repeatedEvents.forEachAtTime(i,function(t){(i-t.time)%t.interval===0&&t.callback(e)})},t.Transport.prototype.schedule=function(t,e){var i={time:this.toTicks(e),callback:t},n=this._eventID++;return this._scheduledEvents[n.toString()]={event:i,timeline:this._timeline},this._timeline.addEvent(i),n},t.Transport.prototype.scheduleRepeat=function(t,e,i,n){if(e<=0)throw new Error("Tone.Transport: repeat events must have an interval larger than 0");var r={time:this.toTicks(i),duration:this.toTicks(this.defaultArg(n,1/0)),interval:this.toTicks(e),callback:t},o=this._eventID++;return this._scheduledEvents[o.toString()]={event:r,timeline:this._repeatedEvents},this._repeatedEvents.addEvent(r),o},t.Transport.prototype.scheduleOnce=function(t,e){var i={time:this.toTicks(e),callback:t},n=this._eventID++;return this._scheduledEvents[n.toString()]={event:i,timeline:this._onceEvents},this._onceEvents.addEvent(i),n},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.removeEvent(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(t){return t=this.defaultArg(t,0),t=this.toTicks(t),this._timeline.cancel(t),this._onceEvents.cancel(t),this._repeatedEvents.cancel(t),this},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,i){return e=this.toSeconds(e),i=this.isUndef(i)?new t.Time(this._clock.ticks,"i"):new t.Time(i),this._clock.start(e,i.toTicks()),this.trigger("start",e,i.toSeconds()),this},t.Transport.prototype.stop=function(t){return t=this.toSeconds(t),this._clock.stop(t),this.trigger("stop",t),this},t.Transport.prototype.pause=function(t){return t=this.toSeconds(t),this._clock.pause(t),this.trigger("pause",t),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){this._clock.ticks=t}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){e=this.toSeconds(e);var i;if(this.state!==t.State.Started)return 0;i=this._clock._nextTick;var n=t.Time(this.ticks,"i").eval(),r=e-n%e;return 0===r&&(r=e),i+r},t.Transport.prototype.syncSignal=function(e,i){i||(i=0!==e._param.value?e._param.value/this.bpm._param.value:0);var n=new t.Gain(i);return this.bpm.chain(n,e._param),this._syncedSignals.push({ratio:n,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal._param.value=i.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t._initAudioContext(function(){if("function"==typeof t.Transport)t.Transport=new t.Transport;else{t.Transport.stop();var i=t.Transport.get();t.Transport.dispose(),e.call(t.Transport),t.Transport.set(i)}}),t.Transport}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(13)],r=function(t){"use strict";return t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this.url=void 0,this.loaded=!1,this.onload=e.onload.bind(this,this),e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),this.onload(this)):this.isString(e.url)&&(this.url=e.url,t.Buffer._addToQueue(e.url,this))},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,onload:t.noOp,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this.loaded=!0,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i){return this.url=e,this.onload=this.defaultArg(i,this.onload),t.Buffer._addToQueue(e,this),this},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),t.Buffer._removeFromQueue(this),this._buffer=null,this.onload=t.Buffer.defaults.onload,this},Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this._buffer.numberOfChannels;t++)Array.prototype.reverse.call(this._buffer.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._queue=[],t.Buffer._currentDownloads=[],t.Buffer._totalDownloads=0,t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS=6,t.Buffer._addToQueue=function(e,i){t.Buffer._queue.push({url:e,Buffer:i,progress:0,xhr:null}),this._totalDownloads++,t.Buffer._next()},t.Buffer._removeFromQueue=function(e){var i;for(i=0;i<t.Buffer._queue.length;i++){var n=t.Buffer._queue[i];n.Buffer===e&&t.Buffer._queue.splice(i,1)}for(i=0;i<t.Buffer._currentDownloads.length;i++){var r=t.Buffer._currentDownloads[i];r.Buffer===e&&(t.Buffer._currentDownloads.splice(i,1),r.xhr.abort(),r.xhr.onprogress=null,r.xhr.onload=null,r.xhr.onerror=null)}},t.Buffer._next=function(){if(t.Buffer._queue.length>0){if(t.Buffer._currentDownloads.length<t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS){var e=t.Buffer._queue.shift();t.Buffer._currentDownloads.push(e),e.xhr=t.Buffer.load(e.url,function(i){var n=t.Buffer._currentDownloads.indexOf(e);t.Buffer._currentDownloads.splice(n,1),e.Buffer.set(i),e.Buffer._reversed&&e.Buffer._reverse(),e.Buffer.onload(e.Buffer),t.Buffer._onprogress(),t.Buffer._next()}),e.xhr.onprogress=function(i){e.progress=i.loaded/i.total,t.Buffer._onprogress()},e.xhr.onerror=function(e){t.Buffer.trigger("error",e)}}}else 0===t.Buffer._currentDownloads.length&&(t.Buffer.trigger("load"),t.Buffer._totalDownloads=0)},t.Buffer._onprogress=function(){var e=0,i=t.Buffer._currentDownloads.length,n=0;if(i>0){for(var r=0;r<i;r++){var o=t.Buffer._currentDownloads[r];e+=o.progress}n=e}var s=i-n,a=t.Buffer._totalDownloads-t.Buffer._queue.length-s;t.Buffer.trigger("progress",a/t.Buffer._totalDownloads)},t.Buffer.baseUrl="",t.Buffer.load=function(e,i){var n=new XMLHttpRequest;return n.open("GET",t.Buffer.baseUrl+e,!0),n.responseType="arraybuffer",n.onload=function(){t.context.decodeAudioData(n.response,function(t){i(t)},function(){throw new Error("Tone.Buffer: could not decode audio data:"+e)})},n.send(),n},t.Buffer.supportsType=function(t){var e=t.split(".");e=e[e.length-1];var i=document.createElement("audio").canPlayType("audio/"+e);return""!==i},t.Buffer}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(12)],r=function(t){"use strict";t.Master=function(){t.call(this),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t._initAudioContext(function(){t.prototype.isUndef(t.Master)?(e.prototype.dispose.call(t.Master),e.call(t.Master)):t.Master=new e}),t.Master}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(2)],r=function(t){"use strict";return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){if(this.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");if(t.time=this.toSeconds(t.time),this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);e!==-1&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){t=this.toSeconds(t);var e=this._search(t);return e!==-1?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){t=this.toSeconds(t);var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){t=this.toSeconds(t);var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var i=this._search(t);return i-1>=0?this._timeline[i-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){t=this.toSeconds(t);var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){t=this.toSeconds(t);var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){var e=0,i=this._timeline.length,n=i;if(i>0&&this._timeline[i-1].time<=t)return i-1;for(;e<n;){var r=Math.floor(e+(n-e)/2),o=this._timeline[r],s=this._timeline[r+1];if(o.time===t){for(var a=r;a<this._timeline.length;a++){var u=this._timeline[a];u.time===t&&(r=a)}return r}if(o.time<t&&s.time>t)return r;o.time>t?n=r:o.time<t&&(e=r+1)}return-1},t.Timeline.prototype._iterate=function(t,e,i){this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1);for(var n=e;n<=i;n++)t(this._timeline[n]);if(this._iterating=!1,this._toRemove.length>0){for(var r=0;r<this._toRemove.length;r++){var o=this._timeline.indexOf(this._toRemove[r]);o!==-1&&this._timeline.splice(o,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){t=this.toSeconds(t);var i=this._search(t);return i!==-1&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){t=this.toSeconds(t);var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){t=this.toSeconds(t);for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){t=this.toSeconds(t);var i=this._search(t);return i!==-1&&this._iterate(function(i){i.time===t&&e(i)},0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(9),i(2)],r=function(t){"use strict";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:this.toSeconds(e)})},t.TimelineState}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(30),i(2),i(14),i(5)],r=function(t){"use strict";return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){for(var i=e.createBuffer(1,128,e.sampleRate),n=i.getChannelData(0),r=0;r<n.length;r++)n[r]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,
t.Signal._constant.channelCountMode="explicit",t.Signal._constant.buffer=i,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(11),i(5)],r=function(t){"use strict";return t.Volume=function(){var e=this.optionsObject(arguments,["volume"],t.Volume.defaults);this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=0,this._muted=!1,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this._muted},set:function(t){!this._muted&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-(1/0)):this._muted&&!t&&(this.volume.value=this._unmutedVolume),this._muted=t}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1)],r=function(t){"use strict";return t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var r=i[n];this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}return this},t.Emitter.prototype.off=function(e,i){for(var n=e.split(/\W+/),r=0;r<n.length;r++)if(e=n[r],this._events.hasOwnProperty(e))if(t.prototype.isUndef(i))this._events[e]=[];else for(var o=this._events[e],s=0;s<o.length;s++)o[s]===i&&o.splice(s,1);return this},t.Emitter.prototype.trigger=function(t){if(this._events){var e=Array.prototype.slice.call(arguments,1);if(this._events.hasOwnProperty(t))for(var i=this._events[t],n=0,r=i.length;n<r;n++)i[n].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=["on","off","trigger"];e._events={};for(var n=0;n<i.length;n++){var r=i[n],o=t.Emitter.prototype[r];e[r]=o}},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(2)],r=function(t){"use strict";return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._param.cancelScheduledValues(0),this._param.value=e}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.setValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return 0===e&&(e=this._minOutput),this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var n=0;n<t.length;n++)t[n]=this._fromUnits(t[n]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i,n){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampToValue(e,i,n):this.linearRampToValue(e,i,n),this},t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this},t.Param}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(17)],r=function(t){t.Frequency=function(e,i){return this instanceof t.Frequency?void t.TimeBase.call(this,e,i):new t.Frequency(e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,i){var n=e[t.toLowerCase()],r=n+12*(parseInt(i)+1);return this.midiToFrequency(r)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}},t.Frequency.prototype.transpose=function(t){return this._expr=function(t,e){var i=t();return i*this.intervalToFrequencyRatio(e)}.bind(this,this._expr,t),this},t.Frequency.prototype.harmonize=function(t){return this._expr=function(t,e){for(var i=t(),n=[],r=0;r<e.length;r++)n[r]=i*this.intervalToFrequencyRatio(e[r]);return n}.bind(this,this._expr,t),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.eval())},t.Frequency.prototype.toNote=function(){var e=this.eval(),n=Math.log(e/t.Frequency.A4)/Math.LN2,r=Math.round(12*n)+57,o=Math.floor(r/12);o<0&&(r+=-12*o);var s=i[r%12];return s+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.eval()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.eval()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/t.Frequency.A4)/Math.LN2},t.Frequency}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(17)],r=function(t){return t.Time=function(e,i){return this instanceof t.Time?(this._plusNow=!1,void t.TimeBase.call(this,e,i)):new t.Time(e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(t,e){return e=this.defaultArg(e,1),this._expr=function(t,e,i){t=t(),e=e.toSeconds();var n=Math.round(t/e),r=n*e,o=r-t;return t+o*i}.bind(this,this._expr,new this.constructor(t),e),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=["1m","2n","4n","8n","16n","32n","64n","128n"],i=this._toNotationHelper(t,e),n=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],r=this._toNotationHelper(t,n);return r.split("+").length<i.split("+").length?r:i},t.Time.prototype._toNotationHelper=function(t,e){for(var i=this._notationToUnits(e[e.length-1]),n="",r=0;r<e.length;r++){var o=this._notationToUnits(e[r]),s=t/o,a=1e-6;if(1-s%1<a&&(s+=a),s=Math.floor(s),s>0){if(n+=1===s?e[r]:s.toString()+"*"+e[r],t-=s*o,t<i)break;n+=" + "}}return""===n&&(n="0"),n},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,i=[e.n,e.t,e.m],n=0;n<i.length;n++){var r=i[n],o=t.match(r.regexp);if(o)return r.method.call(this,o[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,i=Math.floor(e/this._timeSignature()),n=e%1*4;e=Math.floor(e)%this._timeSignature(),n=n.toString(),n.length>3&&(n=parseFloat(n).toFixed(3));var r=[i,e,n];return r.join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.eval()/e;return Math.floor(i*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.eval()},t.Time.prototype.toSeconds=function(){return this._expr()},t.Time.prototype.eval=function(){var t=this._expr();return t+(this._plusNow?this.now():0)},t.Time}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1)],r=function(t){return t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._expr=this._noOp,i=this.defaultArg(i,this._defaultUnits),this.isString(e))this._expr=this._parseExprString(e);else if(this.isNumber(e)){var n=this._primaryExpressions[i].method;this._expr=n.bind(this,e)}else this.isUndef(e)?this._expr=this._defaultExpr():e instanceof t.TimeBase&&(this._expr=e._expr)},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},"default":{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){function e(t,e){for(var i=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],n=0;n<i.length;n++){var r=e[i[n]];for(var o in r){var s=r[o],a=s.regexp,u=t.match(a);if(null!==u)return{method:s.method,precedence:s.precedence,regexp:s.regexp,value:u[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}for(var i=-1,n=[];t.length>0;){t=t.trim();var r=e(t,this);n.push(r),t=t.substr(r.value.length)}return{next:function(){return n[++i]},peek:function(){return n[i+1]}}},t.TimeBase.prototype._matchGroup=function(t,e,i){var n=!1;if(!this.isUndef(t))for(var r in e){var o=e[r];if(o.regexp.test(t.value)){if(this.isUndef(i))return o;if(o.precedence===i)return o}}return n},t.TimeBase.prototype._parseBinary=function(t,e){this.isUndef(e)&&(e=2);var i;i=e<0?this._parseUnary(t):this._parseBinary(t,e-1);for(var n=t.peek();n&&this._matchGroup(n,this._binaryExpressions,e);)n=t.next(),i=n.method.bind(this,i,this._parseBinary(t,e-1)),n=t.peek();return i},t.TimeBase.prototype._parseUnary=function(t){var e,i;e=t.peek();var n=this._matchGroup(e,this._unaryExpressions);return n?(e=t.next(),i=this._parseUnary(t),n.method.bind(this,i)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(t){var e,i;if(e=t.peek(),this.isUndef(e))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(e,this._primaryExpressions)){e=t.next();var n=e.value.match(e.regexp);return e.method.bind(this,n[1],n[2],n[3])}if(e&&"("===e.value){if(t.next(),i=this._parseBinary(t),e=t.next(),!e||")"!==e.value)throw new SyntaxError("Expected )");return i}throw new SyntaxError("Tone.TimeBase: Cannot process token "+e.value)},t.TimeBase.prototype._parseExprString=function(t){var e=this._tokenize(t),i=this._parseBinary(e);return i},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,i,n){return e instanceof t.TimeBase||(e=new t.TimeBase(e,n)),this._expr=this._binaryExpressions[i].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.eval=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(3),p=n(u),h=i(4),l=n(h),c=function(t){function e(){return r(this,e),o(this,Object.getPrototypeOf(e).call(this))}return s(e,t),a(e,[{key:"start",value:function(t,e,i){if(p["default"].hasHarmonics(t)){var n=p["default"].newSource().connect(this.output),r=p["default"].getHarmonics(t),o=r.timing,s=r.rate;n.playbackRate.value=s,n.start(i,o.start,o.duration,e,0)}}}]),e}(l["default"]);e["default"]=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),p=n(u),h=i(3),l=n(h),c=i(4),f=n(c),d=function(t){function e(t,i,n,s,a){r(this,e);var u=o(this,Object.getPrototypeOf(e).call(this,0,0));return u._velocity=s,u._startTime=t,u._timing=i,u.output=l["default"].newSource(),u.output.playbackRate.value=n,u.output.start(t,i.start,i.duration,a,0),u}return s(e,t),a(e,[{key:"stop",value:function(t){if(this.output.buffer){var e=(t-this._startTime)/this._timing.duration;return e=(1-e)*this._velocity,this.output.stop(t,.2),Math.pow(e,.5)}return 0}}]),e}(p["default"]),m=function(t){function e(){return r(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),a(e,[{key:"start",value:function(t,e,i){var n=e*(l["default"].velocityCount-1),r=Math.round(n),o=r-n,s=1-.5*o,a=l["default"].getNote(t,r),u=a.timing,p=a.rate,h=new d(i,u,p,e,s).connect(this.output);return h}}]),e}(f["default"]);e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(4),p=n(u),h=i(3),l=n(h),c=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t._downTime=1/0,t._currentSound=null,t}return s(e,t),a(e,[{key:"_squash",value:function(t){this._currentSound&&this._currentSound.stop(t,.1),this._currentSound=null}},{key:"_randomRate",value:function(){var t=.01;return Math.random()*t*2-t+1}},{key:"_playSample",value:function(t,e){var i=l["default"].getPedal(e);this._currentSound=l["default"].newSource(),this._currentSound.playbackRate.value=this._randomRate(),this._currentSound.connect(this.output).start(t,i.start,i.duration,.2)}},{key:"down",value:function(t){this._squash(t),this._downTime=t,this._playSample(t,"down")}},{key:"up",value:function(t){this._squash(t),this._downTime=1/0,this._playSample(t,"up")}},{key:"isDown",value:function(t){return t>this._downTime}}]),e}(p["default"]);e["default"]=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(5),p=(n(u),i(1)),h=n(p),l=i(15),c=n(l),f=i(20),d=n(f),m=i(19),_=n(m),y=i(18),v=n(y),g=i(22),T=n(g),b=i(3),S=n(b),x=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this,0,1));return t._loaded=!1,t._heldNotes=new Map,t._sustainedNotes=new Map,t._pedal=(new d["default"]).connect(t.output),t._notes=(new _["default"]).connect(t.output),t._harmonics=(new v["default"]).connect(t.output),t._release=(new T["default"]).connect(t.output),t}return s(e,t),a(e,[{key:"load",value:function(t){var e=this;return S["default"].load(t).then(function(){e._loaded=!0})}},{key:"pedalDown",value:function(t){return this._loaded&&(t=this.toSeconds(t),this._pedal.isDown(t)||this._pedal.down(t)),this}},{key:"pedalUp",value:function(t){return this._loaded&&(t=this.toSeconds(t),this._pedal.isDown(t)&&(this._pedal.up(t),this._sustainedNotes.forEach(function(e){e.forEach(function(e){e.stop(t)})}),this._sustainedNotes.clear())),this}},{key:"keyDown",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?.8:arguments[1],i=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];if(this._loaded&&(i=this.toSeconds(i),this.isString(t)&&(t=Math.round((0,c["default"])(t).toMidi())),!this._heldNotes.has(t))){var n=this._notes.start(t,e,i);this._heldNotes.set(t,n)}return this}},{key:"keyUp",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];if(this._loaded&&(e=this.toSeconds(e),this.isString(t)&&(t=Math.round((0,c["default"])(t).toMidi())),this._heldNotes.has(t))){var i=this._heldNotes.get(t);if(this._heldNotes["delete"](t),this._release.start(t,e),this._pedal.isDown(e)){var n=[];this._sustainedNotes.has(t)&&(n=this._sustainedNotes.get(t)),n.push(i),this._sustainedNotes.set(t,n)}else{var r=i.stop(e);this._harmonics.start(t,r,e)}}return this}},{key:"setVolume",value:function(t,e){switch(t){case"note":this._notes.volume=e;break;case"pedal":this._pedal.volume=e;break;case"release":this._release.volume=e;break;case"harmonics":this._harmonics.volume=e}}}]),e}(h["default"]);e["default"]=x},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(3),p=n(u),h=i(4),l=n(h),c=function(t){function e(){return r(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),a(e,[{key:"start",value:function(t,e){var i=p["default"].newSource().connect(this.output),n=p["default"].getRelease(t),r=n.timing,o=n.rate;i.playbackRate.value=o,i.start(e,r.start,r.duration,.01,0)}}]),e}(l["default"]);e["default"]=c},function(t,e,i){!function(e,i){t.exports=i()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,r;n=[i(1),i(2),i(3)],r=function(t,e,i){return{parse:function(n){var r=t(n),o=e(r);return{transport:o,tracks:i(r,o)}},load:function(t,e){var i=new XMLHttpRequest;return i.open("GET",t),i.overrideMimeType("text/plain; charset=x-user-defined"),i.onload=function(){if(4===i.readyState&&200===i.status){for(var t=i.responseText||"",n=[],r=0;r<t.length;r++)n[r]=String.fromCharCode(255&t.charCodeAt(r));var o=this.parse(n.join(""));e&&e(o)}}.bind(this),i.send(),i}}}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e){function i(t){function e(t){var e=t.read(4),i=t.readInt32();return{id:e,length:i,data:t.read(i)}}function i(t){var e={};e.deltaTime=t.readVarInt();var i=t.readInt8();if(240==(240&i)){if(255==i){e.type="meta";var n=t.readInt8(),o=t.readVarInt();switch(n){case 0:if(e.subtype="sequenceNumber",2!=o)throw"Expected length for sequenceNumber event is 2, got "+o;return e.number=t.readInt16(),e;case 1:return e.subtype="text",e.text=t.read(o),e;case 2:return e.subtype="copyrightNotice",e.text=t.read(o),e;case 3:return e.subtype="trackName",e.text=t.read(o),e;case 4:return e.subtype="instrumentName",e.text=t.read(o),e;case 5:return e.subtype="lyrics",e.text=t.read(o),e;case 6:return e.subtype="marker",e.text=t.read(o),e;case 7:return e.subtype="cuePoint",e.text=t.read(o),e;case 32:if(e.subtype="midiChannelPrefix",1!=o)throw"Expected length for midiChannelPrefix event is 1, got "+o;return e.channel=t.readInt8(),e;case 47:if(e.subtype="endOfTrack",0!=o)throw"Expected length for endOfTrack event is 0, got "+o;return e;case 81:if(e.subtype="setTempo",3!=o)throw"Expected length for setTempo event is 3, got "+o;return e.microsecondsPerBeat=(t.readInt8()<<16)+(t.readInt8()<<8)+t.readInt8(),e;case 84:if(e.subtype="smpteOffset",5!=o)throw"Expected length for smpteOffset event is 5, got "+o;var s=t.readInt8();return e.frameRate={0:24,32:25,64:29,96:30}[96&s],e.hour=31&s,e.min=t.readInt8(),e.sec=t.readInt8(),e.frame=t.readInt8(),e.subframe=t.readInt8(),e;case 88:if(e.subtype="timeSignature",4!=o)throw"Expected length for timeSignature event is 4, got "+o;return e.numerator=t.readInt8(),e.denominator=Math.pow(2,t.readInt8()),e.metronome=t.readInt8(),e.thirtyseconds=t.readInt8(),e;case 89:if(e.subtype="keySignature",2!=o)throw"Expected length for keySignature event is 2, got "+o;return e.key=t.readInt8(!0),e.scale=t.readInt8(),e;case 127:return e.subtype="sequencerSpecific",e.data=t.read(o),e;default:return e.subtype="unknown",e.data=t.read(o),e}return e.data=t.read(o),e}if(240==i){e.type="sysEx";var o=t.readVarInt();return e.data=t.read(o),e}if(247==i){e.type="dividedSysEx";var o=t.readVarInt();return e.data=t.read(o),e}throw"Unrecognised MIDI event type byte: "+i}var a;0==(128&i)?(a=i,i=r):(a=t.readInt8(),r=i);var u=i>>4;switch(e.channel=15&i,e.type="channel",u){case 8:return e.subtype="noteOff",e.noteNumber=a,e.velocity=t.readInt8(),e;case 9:return e.noteNumber=a,e.velocity=t.readInt8(),0==e.velocity?e.subtype="noteOff":e.subtype="noteOn",e;case 10:return e.subtype="noteAftertouch",e.noteNumber=a,e.amount=t.readInt8(),e;case 11:return e.subtype="controller",e.controllerType=a,e.value=t.readInt8(),e;case 12:return e.subtype="programChange",e.programNumber=a,e;case 13:return e.subtype="channelAftertouch",e.amount=a,e;case 14:return e.subtype="pitchBend",e.value=a+(t.readInt8()<<7),e;default:throw"Unrecognised MIDI event type: "+u}}var r;stream=n(t);var o=e(stream);if("MThd"!=o.id||6!=o.length)throw"Bad .mid file - header not found";var s=n(o.data),a=s.readInt16(),u=s.readInt16(),p=s.readInt16();if(32768&p)throw"Expressing time division in SMTPE frames is not supported yet";ticksPerBeat=p;for(var h={formatType:a,trackCount:u,ticksPerBeat:ticksPerBeat},l=[],c=0;c<h.trackCount;c++){l[c]=[];var f=e(stream);if("MTrk"!=f.id)throw"Unexpected chunk - expected MTrk, got "+f.id;for(var d=n(f.data);!d.eof();){var m=i(d);l[c].push(m)}}return{header:h,tracks:l}}function n(t){function e(e){var i=t.substr(a,e);return a+=e,i}function i(){var e=(t.charCodeAt(a)<<24)+(t.charCodeAt(a+1)<<16)+(t.charCodeAt(a+2)<<8)+t.charCodeAt(a+3);return a+=4,e}function n(){var e=(t.charCodeAt(a)<<8)+t.charCodeAt(a+1);return a+=2,e}function r(e){var i=t.charCodeAt(a);return e&&i>127&&(i-=256),a+=1,i}function o(){return a>=t.length}function s(){for(var t=0;;){var e=r();if(!(128&e))return t+e;t+=127&e,t<<=7}}var a=0;return{eof:o,read:e,readInt32:i,readInt16:n,readInt8:r,readVarInt:s}}t.exports=function(t){return i(t)}},function(t,e,i){var n;n=function(){return function(t){for(var e={midiPPQ:t.header.ticksPerBeat},i=0;i<t.tracks.length;i++)for(var n=t.tracks[i],r=0;r<n.length;r++){var o=n[r];"meta"===o.type&&("timeSignature"===o.subtype?e.timeSignature=[o.numerator,o.denominator]:"setTempo"===o.subtype&&(e.bpm||(e.bpm=6e7/o.microsecondsPerBeat)))}return e.bpm=e.bpm||120,e}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,r;n=[i(4),i(5),i(6),i(7)],r=function(t,e,i,n){function r(t,r){var o=n(t,r),s={},a=e(t);a&&(s.name=a);var u=i(t,r);u&&(s.notes=u[0],s.noteOffs=u[1]);for(var p in o)s[p]=o[p];return s}return function(e,i){for(var n=(e.header.ticksPerBeat,[]),o=0;o<e.tracks.length;o++){var s=e.tracks[o];s=t.absoluteTime(s,i),n.push(r(s,i))}return n}}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n;n=function(){return{midiToFloat:function(t){return parseFloat((t/127).toFixed(4))},ticksToTime:function(t,e){var i=60/e.bpm*(t/e.midiPPQ);return i},absoluteTime:function(t,e){for(var i=0,n=0;n<t.length;n++){var r=t[n];i+=r.deltaTime,r.time=this.ticksToTime(i,e),r.ticks=i,delete r.deltaTime}return t},defaults:function(t,e){t=t||{};for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);return t}}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){return function(t){var e;return t.forEach(function(t){"meta"===t.type&&"trackName"===t.subtype&&(e=t.text,e=e.replace(/\u0000/g,""))}),e}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,r;n=[i(4)],r=function(t){function e(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(t/12)-1,n=t%12;return e[n]+i}return function(i){for(var n=[],r=[],o=0;o<i.length;o++){var s=i[o];if("noteOn"===s.subtype){var a={ticks:s.ticks,time:s.time,midi:s.noteNumber,noteNumber:s.noteNumber,note:e(s.noteNumber),velocity:t.midiToFloat(s.velocity)};n.push(a)}else if("noteOff"===s.subtype){r.push({ticks:s.ticks,time:s.time,midi:s.noteNumber,note:e(s.noteNumber)});for(var u=0;u<n.length;u++){var p=n[u];if(p.noteNumber===s.noteNumber&&"undefined"==typeof p.duration){p.duration=s.time-p.time,delete p.noteNumber;break}}}}return n.length?[n,r]:void 0}}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(4)],r=function(t){function e(t){var e={};return t.forEach(function(t){"controller"===t.subtype&&(e[t.controllerType]=1)}),e}function i(e,i){var n=[];return e.forEach(function(e){
"controller"===e.subtype&&e.controllerType===i&&n.push({ticks:e.ticks,time:e.time,value:t.midiToFloat(e.value)})}),n}var n={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoContro"};return function(t){var r=e(t),o={};for(var s in r){s=parseInt(s);var a=i(t,s);n[s]&&(o[n[s]]=a),o["cc_"+s]=a}return o}}.apply(e,n),!(void 0!==r&&(t.exports=r))}])})},function(t,e,i){var n,r;n=[i(1),i(29),i(10)],r=function(t){"use strict";t.Clock=function(){var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._lookAhead="auto",this._computedLookAhead=.02,this._nextTick=-1,this._lastUpdate=-1,this._loopID=-1,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),t.Clock._worker.addEventListener("message",this._boundLoop),this._readOnly("frequency")},t.extend(t.Clock),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){"auto"===t?this._lookAhead="auto":this._lookAhead=this.toSeconds(t)}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){if("auto"===this._lookAhead){var e=this.now();if(this._lastUpdate!==-1){var i=e-this._lastUpdate;i=Math.min(.2,i),this._computedLookAhead=(9*this._computedLookAhead+i)/10}this._lastUpdate=e}else this._computedLookAhead=this._lookAhead;var n=this.now(),r=2*this._computedLookAhead,o=this._state.getEvent(n+r),s=t.State.Stopped;if(o&&(s=o.state,this._nextTick===-1&&s===t.State.Started&&(this._nextTick=o.time,this.isUndef(o.offset)||(this.ticks=o.offset))),s===t.State.Started)for(;n+r>this._nextTick;){var a=this._nextTick;this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(a),this.ticks++}else s===t.State.Stopped?(this._nextTick=-1,this.ticks=0):s===t.State.Paused&&(this._nextTick=-1)},t.Clock.prototype.getStateAtTime=function(t){return this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){cancelAnimationFrame(this._loopID),t.TimelineState.prototype.dispose.call(this),t.Clock._worker.removeEventListener("message",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},window.URL=window.URL||window.webkitURL;var e=new Blob(["setInterval(function(){self.postMessage('tick')}, 20)"]),i=URL.createObjectURL(e);return t.Clock._worker=new Worker(i),t.Clock}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(2)],r=function(t){"use strict";t.IntervalTimeline=function(){this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.addEvent=function(t){if(this.isUndef(t.time)||this.isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var i=new e(t.time,t.time+t.duration,t);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.removeEvent=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return t=this.toSeconds(t),this.forEachAfter(t,function(t){this.removeEvent(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i,n=t.getBalance();if(n>0)if(null===t.left.right)e=t.left,e.right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.getEvent=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];null!==this._root&&this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(t=this.toSeconds(t),null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var r=i[n].event;r&&e(r)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(t=this.toSeconds(t),null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--){var r=i[n].event;r&&e(r)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(6),i(2),i(10)],r=function(t){"use strict";return t.Event=function(){var e=this.optionsObject(arguments,["callback","value"],t.Event.defaults);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=this.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i;if(e.state===t.State.Started){this.isUndef(e.id)||t.Transport.clear(e.id);var n=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){i=1/0,this.isNumber(this._loop)&&(i=this._loop*this._getLoopDuration());var r=this._state.getEventAfter(n);null!==r&&(i=Math.min(i,r.time-n)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,n+i+1),i=t.Time(i,"i"));var o=t.Time(this._getLoopDuration(),"i");e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(n,"i"),i)}else e.id=t.Transport.schedule(this._tick.bind(this),n+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getStateAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Stopped&&(this._state.addEvent({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var i=this._state.getEventBefore(e),n=e;null!==i&&(n=i.time),this._rescheduleEvents(n)}return this},t.Event.prototype.cancel=function(e){return e=this.defaultArg(e,-(1/0)),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getStateAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;this.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*i}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,i=this._state.getEvent(e);if(null!==i&&i.state===t.State.Started){var n=this._getLoopDuration(),r=(e-i.time)%n;return r/n}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(26),i(2),i(6)],r=function(t){"use strict";return t.Part=function(){var e=this.optionsObject(arguments,["callback","events"],t.Part.defaults);this._loop=e.loop,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this._startOffset=0,this._state=new t.TimelineState(t.State.Stopped),this._events=[],this.callback=e.callback,this.mute=e.mute;var i=this.defaultArg(e.events,[]);if(!this.isUndef(e.events))for(var n=0;n<i.length;n++)Array.isArray(i[n])?this.add(i[n][0],i[n][1]):this.add(i[n])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1},t.Part.prototype.start=function(e,i){var n=this.toTicks(e);return this._state.getStateAtTime(n)!==t.State.Started&&(i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toTicks(i),this._state.addEvent({state:t.State.Started,time:n,offset:i}),this._forEach(function(t){this._startNote(t,n,i)})),this},t.Part.prototype._startNote=function(e,i,n){i-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(i+=this._getLoopDuration()),e.start(t.TransportTime(i,"i"))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(t.TransportTime(i,"i"))):e.startOffset>=n&&e.start(t.TransportTime(i,"i"))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.cancel(i),this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,i){e=t.TransportTime(e);for(var n=t.Time(1,"i").toSeconds(),r=0;r<this._events.length;r++){var o=this._events[r];if(Math.abs(e.toTicks()-o.startOffset)<n)return this.isUndef(i)||(o.value=i),o}return this.isUndef(i)?null:(this.add(e,i),this._events[this._events.length-1])},t.Part.prototype.add=function(e,i){this.isObject(e)&&e.hasOwnProperty("time")&&(i=e,e=i.time,delete i.time),e=this.toTicks(e);var n;return i instanceof t.Event?(n=i,n.callback=this._tick.bind(this)):n=new t.Event({callback:this._tick.bind(this),value:i}),n.startOffset=e,n.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(n),this._restartEvent(n),this},t.Part.prototype._restartEvent=function(e){var i=this._state.getEvent(this.now());i&&i.state===t.State.Started&&this._startNote(e,i.time,i.offset)},t.Part.prototype.remove=function(e,i){this.isObject(e)&&e.hasOwnProperty("time")&&(i=e,e=i.time),e=this.toTicks(e);for(var n=this._events.length-1;n>=0;n--){var r=this._events[n];r instanceof t.Part?r.remove(e,i):r.startOffset===e&&(this.isUndef(i)||!this.isUndef(i)&&r.value===i)&&(this._events.splice(n,1),r.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(t),this},t.Part.prototype._forEach=function(e,i){i=this.defaultArg(i,this);for(var n=this._events.length-1;n>=0;n--){var r=this._events[n];r instanceof t.Part?r._forEach(e,i):e.call(i,r)}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel():e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopEnd=this.loopEnd,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1)],r=function(t){"use strict";return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,n),this},t.SignalBase}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(11),i(9)],r=function(t){"use strict";return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this._events=new t.Timeline(10),t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){var n=this._searchBefore(i);n&&0===n.value&&this.setValueAtTime(this._minOutput,n.time),e=this._fromUnits(e);var r=Math.max(e,this._minOutput);return i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:r,time:i}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,i-this.sampleTime),this.setValueAtTime(0,i)):this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:n}),this._param.setTargetAtTime(e,i,n),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,r){r=this.defaultArg(r,1);for(var o=new Array(e.length),s=0;s<o.length;s++)o[s]=this._fromUnits(e[s])*r;i=this.toSeconds(i),n=this.toSeconds(n),this._events.addEvent({type:t.TimelineSignal.Type.Curve,value:o,time:i,duration:n}),this._param.setValueAtTime(o[0],i);for(var a=1;a<o.length;a++){var u=i+a/(o.length-1)*n;this._param.linearRampToValueAtTime(o[a],u)}return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return this._events.cancel(t),this._param.cancelScheduledValues(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var i=this._toUnits(this.getValueAtTime(e)),n=this._searchBefore(e);if(n&&n.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(n&&n.type===t.TimelineSignal.Type.Curve&&n.time+n.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(i,e);else{var r=this._searchAfter(e);r&&(this.cancelScheduledValues(e),r.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):r.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e)}return this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){var i=this._searchAfter(e),n=this._searchBefore(e),r=this._initial;if(null===n)r=this._initial;else if(n.type===t.TimelineSignal.Type.Target){var o,s=this._events.getEventBefore(n.time);o=null===s?this._initial:s.value,r=this._exponentialApproach(n.time,o,n.value,n.constant,e)}else r=n.type===t.TimelineSignal.Type.Curve?this._curveInterpolate(n.time,n.value,n.duration,e):null===i?n.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value;return r},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,n,r){return i+(e-i)*Math.exp(-(r-t)/n)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,n,r){return e+(n-e)*((r-t)/(i-t))},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,n,r){return e=Math.max(this._minOutput,e),e*Math.pow(n/e,(r-t)/(i-t))},t.TimelineSignal.prototype._curveInterpolate=function(t,e,i,n){var r=e.length;if(n>=t+i)return e[r-1];if(n<=t)return e[0];var o=(n-t)/i,s=Math.floor((r-1)*o),a=Math.ceil((r-1)*o),u=e[s],p=e[a];return a===s?u:this._linearInterpolate(s,u,a,p,o*(r-1))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(28)],r=function(t){"use strict";return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,i=this._curve.length;e<i;e++){var n=e/(i-1)*2-1;this._curve[e]=t(n,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(["none","2x","4x"].indexOf(t)===-1)throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(7),i(32)],r=function(t){return t.BufferSource=function(){var e=this.optionsObject(arguments,["buffer","onended"],t.BufferSource.defaults);this.onended=e.onended,this._startTime=-1,this._gainNode=this.output=this.context.createGain(),this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._source.onended=this._onended.bind(this),this.playbackRate=this._source.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._gain=1,this.isUndef(e.buffer)||(this.buffer=e.buffer),this.loop=e.loop},t.extend(t.BufferSource),t.BufferSource.defaults={onended:t.noOp,fadeIn:0,fadeOut:0},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return this._startTime!==-1&&e>this._startTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(t,e,i,n,r){if(this._startTime!==-1)throw new Error("Tone.BufferSource: can only be started once.");return this.buffer&&(t=this.toSeconds(t),e=this.loop?this.defaultArg(e,this.loopStart):this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._source.start(t,e),n=this.defaultArg(n,1),this._gain=n,r=this.isUndef(r)?this.toSeconds(this.fadeIn):this.toSeconds(r),r>0?(this._gainNode.gain.setValueAtTime(0,t),this._gainNode.gain.linearRampToValueAtTime(this._gain,t+r)):this._gainNode.gain.setValueAtTime(n,t),this._startTime=t+r,this.isUndef(i)||(i=this.defaultArg(i,this.buffer.duration-e),i=this.toSeconds(i),this.stop(t+i+r,r))),this},t.BufferSource.prototype.stop=function(t,e){return this.buffer&&(t=this.toSeconds(t),e=this.isUndef(e)?this.toSeconds(this.fadeOut):this.toSeconds(e),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),e>0?(this._gainNode.gain.setValueAtTime(this._gain,t),this._gainNode.gain.linearRampToValueAtTime(0,t+e),t+=e):this._gainNode.gain.setValueAtTime(0,t),this._source.stop(t)),this},t.BufferSource.prototype._onended=function(){this.onended(this),this.dispose()},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._source?this._source.buffer:null},set:function(e){e instanceof t.Buffer?this._source.buffer=e.get():this._source.buffer=e}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return this.onended=null,this._source&&(this._source.onended=null,this._source.disconnect(),this._source=null),this._gainNode&&(this._gainNode.disconnect(),this._gainNode=null),this._startTime=-1,this.playbackRate=null,this.output=null,this},t.BufferSource}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(6),i(12),i(8),i(2),i(10),i(11)],r=function(t){"use strict";return t.Source=function(e){t.call(this),e=this.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._syncStart=function(t,e){t=this.toSeconds(t),t+=this.toSeconds(this._startDelay),this.start(t,e)}.bind(this),this._syncStop=this.stop.bind(this),this._startDelay=0,this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype.start=function(e){return e=this.toSeconds(e),(this._state.getStateAtTime(e)!==t.State.Started||this.retrigger)&&(this._state.setStateAtTime(t.State.Started,e),this._start&&this._start.apply(this,arguments)),this},t.Source.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._stop&&this._stop.apply(this,arguments),this},t.Source.prototype.sync=function(e){return this._startDelay=this.defaultArg(e,0),t.Transport.on("start",this._syncStart),t.Transport.on("stop pause",this._syncStop),this},t.Source.prototype.unsync=function(){return this._startDelay=0,t.Transport.off("start",this._syncStart),t.Transport.off("stop pause",this._syncStop),this},t.Source.prototype.dispose=function(){this.stop(),t.prototype.dispose.call(this),this.unsync(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null,this._syncStart=null,this._syncStart=null},t.Source}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(1),i(16)],r=function(t){return t.TransportTime=function(e,i){return this instanceof t.TransportTime?void t.Time.call(this,e,i):new t.TransportTime(e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var i=this._secondsToTicks(e()),n=Math.ceil(t.Transport.ticks/i);return this._ticksToUnits(n*i)}},t.TransportTime.prototype._secondsToTicks=function(e){var i=this._beatsToUnits(1),n=e/i;return Math.round(n*t.Transport.PPQ)},t.TransportTime.prototype.eval=function(){var e=this._secondsToTicks(this._expr());return e+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.eval()},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}.apply(e,n),!(void 0!==r&&(t.exports=r))}]);